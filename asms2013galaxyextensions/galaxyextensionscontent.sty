\ProvidesPackage{galaxyextensionscontent}

\def\introblock{
  \flexblock{Introduction to Galaxy}{
    \begin{itemize}
    \item The Galaxy framework (http://galaxyproject.org/) is a popular and widely cited platform in the
    genomics community.
      \begin{itemize}
        \item Open source, web-based.
        \item Build complex, reproducible bioinformatics workflows.
      \end{itemize}
    \item As part of the Galaxy-P project we have:
      \begin{itemize} 
        \item Integrated and developed of tools for proteomic analysis.
        \item Built complex workflows for protein identification, 
        quantification, and proteogenomic analysis.
      \end{itemize}
    \end{itemize}  
  }
}

\def\galaxypblock{
  \flexblock{Galaxy-P}{
      \begin{columns}
      \begin{column}{.49\textwidth}
        \begin{itemize}
          \item Try out our public server at https://usegalaxyp.org
          \item Find instructions for building your own Galaxy-P at http://getgalaxyp.org
        \end{itemize}
      \end{column}
      \begin{column}{.5\textwidth}
        \begin{figure}
          \fleximage{0.86}{galaxyp_screenshot.png}
        \end{figure}
      \end{column}
    \end{columns}              
  }
}

\def\galaxypcloudblock{
  \flexblock{Galaxy-P in the Cloud}{
    \begin{columns}
      \begin{column}{.39\textwidth}
        \begin{figure}
          \fleximage{0.8}{biocloudcentral.png}
        \end{figure}
      \end{column}
      
      \begin{column}{.58\textwidth}
        \begin{itemize}
          
          \item Create your own Galaxy-P cluster on Amazon's cloud
          infrastructure https://biocloudcentral.msi.umn.edu.

          \item Launches with CloudMan - an easy-to-use interface for managing
          your new virtual cluster.

        \end{itemize}
      \end{column}
    \end{columns}
    
  }
}

\def\manyfileschallengesblock{
  \flexblock{Handling Large Numbers of Files - Challenges}{
    \begin{itemize}
      \item From Wikipedia, "[Galaxy design choices make] it relatively easy
      to build {\textsl\textbf typical} analyses, but more difficult to build complex
      workflows..."
      \item However "typical" in proteomics is more complicated
      than "typical" in genomics.
      \item The large number of files resulting from the common use of MudPIT/fractionation 
      means that typical workflows in proteomics are structurally more complex
      than genomics. 
      \item Galaxy was not geared toward handling large numbers of files.
    \end{itemize}
}}

\def\jgalaxydesc{
  We developed a Java Web Start rich client application called
  JGalaxy targeting the Galaxy API to allow easy batch file
  downloads and uploads.
  \\ 
  This makes it easier to get a large number of files in and 
  out of Galaxy quickly.
}

\def\jgalaxydownloadfig[#1]{
  \begin{figure}
    \fleximage{#1}{bulkdownload_jgalaxy.png}
  \end{figure}  
}

\def\jgalaxylaunchfig[#1]{
  \begin{figure}
    \fleximage{#1}{launch_jgalaxy.png}
  \end{figure}  
}

\def\jgalaxyblock{
  \flexblock{Handling Large Numbers of Files - JGalaxy}{
    \begin{columns}
      \begin{column}{.25\textwidth}
        \begin{figure}
          \fleximage{.7}{jgalaxy_launch_small.png}
        \end{figure}      
      \end{column}              
      \begin{column}{.45\textwidth}
        \jgalaxydesc
      \end{column}              
      \begin{column}{.29\textwidth}
        \jgalaxydownloadfig[.8]
      \end{column}
    \end{columns}  
  }
}

\def\toolmgfrepeatfig[#1]{
  \begin{figure}
    \fleximage{#1}{mgf_select_repeat.png}
    \caption{Traditional multiple input selection.}
  \end{figure}  
}

\def\toolmultipledesc{
  \begin{itemize}
    \item Previously Galaxy required a lot of clicking and tracking to provide multiple inputs to a tool.
    \item Our Galaxy tool extensions allow easy multiple selection.
    \item \textbf{Convenient for jobs requiring a few inputs, necessary for jobs requiring dozens or hundreds.}
    \item Used in many Galaxy-P proteomics tool wrappers (e.g. MaxQuant, PeptideShaker, Scaffold, etc...).
    \item Incorporated upstream in core Galaxy framework.
  \end{itemize}  
}

\def\toolmultipleselectfig[#1]{
  \begin{figure}
    \fleximage{#1}{mgf_select_multiple.png}
    \caption{Our multiple input extension.}
  \end{figure}                
}


\def\toolextensionsblock{
  \flexblock{Handling Large Numbers of Files - Tool Extensions}{
    \begin{columns}
      \begin{column}{.24\textwidth}
        \toolmgfrepeatfig[.75]
      \end{column}
      \begin{column}{.50\textwidth}
        \toolmultipledesc
      \end{column}
      \begin{column}{.2\textwidth}
        \toolmultipleselectfig[.8]
      \end{column}
    \end{columns}            
    
}}

\def\workflowlimitfigs{
  \begin{figure}
    \fleximage{0.97}{workflow_two_inputs_cropped.png}
    \caption{Traditional Galaxy workflows would not allow this workflow for two inputs to be used with three inputs.}
  \end{figure}
  \vskip3cm
  \begin{figure}
    \fleximage{0.97}{workflow_two_input_combined_cropped.png}
    \caption{Key innovation here it to group multiple files into a single dataset resulting in a flatter workflow.}
  \end{figure}  
}

\def\multiplefiledatasetsdesc{
  Galaxy cannot create reusable workflows with variable number of input datasets. We have created the concept of multiple file datasets to address this deficiency.
  \begin{itemize}
    \item Key Idea: Group any number of files into one Galaxy "dataset".
    \item This allows workflows to operate over any number of inputs and produce any number of outputs.
    \item Built on initial work from Adapt (https://bitbucket.org/glormph/adapt), but extended to transparently work with arbitrary tools and data types.
    \item Available as part of our galaxy-extras project at https://bitbucket.org/msiappdev/galaxy-extras.
    \item Additional benefits include implicit "sample tracking" through complex workflows and keeping the Galaxy history user interface manageable and responsive by reducing the number of datasets used and created in such workflows.
  \end{itemize}  
}

\def\windowschallangesblock{
  \flexblock{Cross Platform Job Execution - Challenges}{

    Perhaps driven by proprietary data formats, proteomics has a
    Windows-centric culture that genomics does not. As an upshot,
    previously there was no easy way to run Windows applications in
    the Galaxy framework.
    \\
    \\
    {\large\textsl
    The number of important proteomics applications tied to the
    Windows platform necessitated the creation of the LWR.}
  }
}

\def\openmsfig{
  \begin{figure}
    \fleximage{0.90}{consensus_id_workflow.png}
    \caption{OpenMS ConsensusID workflow that can operate over any number of peak lists, would not be possible in Galaxy without multiple file dataset extensions. Extension also works seamlessly, the ConsensusID tool does not need to know if it was given multiple input datasets or a single multiple file dataset.}
  \end{figure}
}

\def\lwrblock{
  \flexblock{Cross Platform Job Execution with the LWR}{

    The LWR is an application that can be installed on any server (Windows or
    *nix), allowing remote Galaxy instances can submit standard Galaxy jobs to
    that host.

    \begin{itemize}
      \item Learn how to install the LWR and configuring Galaxy clients at https://lwr.readthedocs.org.
      \item Check out the LWR source code at https://bit.ly/galaxy-lwr-code.
      \item Easy to secure and maintain. Runner code has been included in core Galaxy framework.
      \item LWR allows Galaxy-P to utilize the applications highlighted below (each implemented as standard Galaxy tools).
    \end{itemize}
  }
}

\def\msconvertfig[#1]{
  \begin{figure}
    \fleximage{#1}{msconvert3_screenshot.png}
  \end{figure}                
}

\def\msconvertdesc{
  \begin{itemize}
    \item msconvert (part of ProteWizard) is a tool for converting between various mass spec file formats.
    \item The LWR allows Galaxy-P to utilize the Windows version of msconvert required for converting vendor formats.
    \item Galaxy-P provides access to many msconvert filtering options:
      \begin{itemize}
        \item Peak picking (centroiding)
        \item Filtering by activation (CID, HCD, etc...), m/z, intensity, MS level, etc...
        \item Advanced ETD filtering, deisotoping, and denoising
      \end{itemize}
  \end{itemize}  
}


\def\msconvertblock{
  \flexblock{Tool Highlight - msconvert}{
    \begin{columns}
      \begin{column}{.25\textwidth}
        \msconvertfig[.65]
      \end{column}
      \begin{column}{.74\textwidth}
        \msconvertdesc
      \end{column}  
    \end{columns}            
  }
}

\def\maxquantfig[#1]{
  \begin{figure}
    \fleximage{#1}{maxquant_screenshot.png}
  \end{figure}                
}

\def\maxquantdesc{
  \begin{itemize}
    \item A popular quantitative proteomics package for Thermo Fisher instruments developed at the Max Planck Institute.
    \item Workflow to the right demonstrates combining MaxQuant for SILAC analysis with iQuant for iTRAQ analysis for dually labeled samples.
  \end{itemize}
}

\def\maxquantworkflow[#1]{
  \begin{figure}
    \fleximage{#1}{dual_label_workflow.png}
    %\caption{Workflow demonstrates combining MaxQuant for SILAC analysis with iQuant for iTRAQ analysis for dually labeled samples.}
  \end{figure}                
}

\def\maxquantblock{
  \flexblock{Tool Highlight - MaxQuant}{
    \begin{columns}
      \begin{column}{.17\textwidth}
        \maxquantfig[.8]
      \end{column}
      \begin{column}{.48\textwidth}
        \maxquantdesc
      \end{column}
      \begin{column}{.32\textwidth}
        \maxquantworkflow[.85] 
      \end{column}
    \end{columns}
  }
}

\def\proteinpilotfig[#1]{
  \begin{figure}
    \fleximage{#1}{proteinpilot_screenshot.png}
  \end{figure}                
}

\def\proteinpilotdesc{
  \begin{itemize}
    \item ProteinPilot is a commercial tool developed by AB SCIEX.
    \item {\footnotesize http://www.absciex.com/products/software/proteinpilot-software}
    \item LWR is used for running ProteinPilot as well as supporting tools to extract data from proprietary ProteinPilot outputs.
    \item The "Minnesota Two Step" workflow for proteogenomics and metaproteomics using ProteinPilot in Galaxy-P is shown to the right.
  \end{itemize}  
}

\def\proteinpilotworkflow[#1]{
  \begin{figure}
    \fleximage{#1}{minnesota_two_step.png}
    %\caption{The "Minnesota Two Step" workflow proteogenomics using ProteinPilot in Galaxy-P.}
  \end{figure}  
}

\def\proteinpilotblock{
  \flexblock{Tool Highlight - ProteinPilot}{
    \begin{columns}
      \begin{column}{.2\textwidth}
        \proteinpilotfig[.65]
      \end{column}

      \begin{column}{.55\textwidth}
        \proteinpilotdesc
      \end{column}

      \begin{column}{.24\textwidth}
        \proteinpilotworkflow[.7]
      \end{column}
    \end{columns}
  }
}
