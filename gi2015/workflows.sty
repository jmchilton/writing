\ProvidesPackage{workflows}

\def\galaxyintroblock{
  \flexblock{Galaxy \& Workflows}{
    \begin{columns}
      \begin{column}{.48\textwidth}
        \begin{figure}
          \fleximage{1.00}{galaxy_ngs.png}
	  \end{figure}              
      \end{column}
      \begin{column}{.48\textwidth}
    \begin{itemize}

      \item Data analysis platform
      integrating diverse command-line \textit{tools} into
      a unified web-based interface

      \item Analysis \textit{histories} tracked, provenance available,
      and \textit{reproducibility} and sharing enabled

      \item 60+ public servers designed for a variety of analysis types including usegalaxy.org
      
      \item Free and open source, available at getgalaxy.org

      \item \textit{Extract analysis histories into reusable workflows}

      \end{itemize}
    \end{column}
    \end{columns}
  }
}

\def\workflowsblock{
  \flexblock{Workflow Limitations - Data Flow and Scheduling}{
    \begin{columns}
      \begin{column}{.48\textwidth}
      \begin{itemize}

        \item \textit{Static number of inputs}. Common, simple analyses in bioinformatics require running a variable number of inputs across identical processing steps (``mapping'')
        and collecting these results into a merged output (``reducing'').

        \item Workflow engine planned every job at submission
        time (allowing no dynamic computation).
        Many advanced features such as pausing workflows,
        splitting for parallelization, and conditionals all
        require the re-evaluation of workflows overtime.

        \end{itemize}
    \end{column}
    \begin{column}{.48\textwidth}
      \begin{figure}
        \fleximage{1.00}{data_flow_cropped.png}
      \end{figure}
    \end{column}
  \end{columns}
  }
}

\def\collectionsblock{
  \flexblock{Dataset Collections}{
    \begin{columns}
      \begin{column}{.48\textwidth}
      \begin{itemize}
        \item Group datasets into nested hierarchies of lists and pairs.

        \item ``Map`` unmodified Galaxy tools across collections.

        \item ``Reduce`` collections using tools that consume multiple
        datasets.

        \item Innovative UI elements including collection builders.

        \item Sample tracking over complex analyses.

      \end{itemize}
      \end{column}
      \begin{column}{.48\textwidth}
        \begin{figure}
          \fleximage{1.00}{workflow_collection_creator.png}
        \end{figure}
      \end{column}

    \end{columns}
  }
}

\def\rnaseqblock{
  \flexblock{Dataset Collections \& Workflows}{
    \begin{columns}
      \begin{column}{.48\textwidth}
        Collections solve the data flow problem.
        \begin{figure}
           \fleximage{1}{workflow_editor.png}
        \end{figure}              
      \end{column}
      \begin{column}{.48\textwidth}
        \begin{figure}
           \fleximage{1}{cufflinks_workflow.png}
        \end{figure}              
        Canonical Galaxy RNA-Seq tuxedo workflow with collections.
      \end{column}
    \end{columns}
  }
}

\def\corephylogenomics{
  \flexblock{Phylogenomics SNP Pipeline}{
    \begin{columns}
      \begin{column}{.62\textwidth}
        \begin{figure}
          \fleximage{1.00}{workflow_core_phylogenomics.png}
        \end{figure}              
      \end{column}

      \begin{column}{.34\textwidth}
	Implemented by Aaron Petkau, Gary Van Domselaar, Philip Mabon, and Lee Katz.
	Used to assist in outbreak response for food-born illness by the public
	health agency of Canada. Processes hundreds of paired strains at a time. http://bit.ly/gcc2015irida
      \end{column}

    \end{columns}

  }
}

\def\openms{
  \flexblock{OpenMS Protein Identification Workflow}{
    \begin{columns}
      \begin{column}{.63\textwidth}
        \begin{figure}
          \fleximage{1.00}{workflow_openms.png}
        \end{figure}              
      \end{column}

      \begin{column}{.35\textwidth}
	Protein identification of mass spectrometry data using Open MS.
	Tools and workflow by Torsten Houwaart.
	
	http://bit.ly/gcc2015rna
      \end{column}

    \end{columns}

  }
}

\def\workflowrewrite{
  \flexblock{Real Workflow Scheduling}{
    \begin{itemize}
      \item \textit{Stateful models} allowing re-evaluating workflows over time.
      \item Large and complex workflows will now be \textit{evaluated in the background}.
      \item Allow individual workflow modules to \textit{delay evaluation}.
      \item \textit{Plugin framework} for describing how scheduling occurs.
    \end{itemize}
   }
}

\def\workflowrewriteapps{
  \flexblock{Workflow Scheduling Applications}{
    \begin{columns}
      \begin{column}{.58\textwidth}      
        \begin{itemize}
          \item Tools that output applications (important for
          parallelization)
          \item Pausing workflows
          \item Workflows that orchestrate things beyond Galaxy
          datsets (e.g. reference data http://bit.ly/gcc2015lessclick)
          \item Common Workflow Language
        \end{itemize}
      \end{column}
      \begin{column}{.40\textwidth}
        \begin{figure}
          \fleximage{0.8}{parallelization_cropped.png}
        \end{figure}              
      \end{column}
    \end{columns}
   }
}


\def\futurework{
  \flexblock{Future Work}{
    \begin{columns}
      \begin{column}{.44\textwidth}
        \textbf{Expressivity}
        \begin{itemize}
          \item Implement new workflows modules for conditional paths
          \item Allow interacting with workflows as first class citzens in the UI
          \item Nested workflows
        \end{itemize}
      \end{column}
      \begin{column}{.52\textwidth}
        \textbf{Scaling}
        \begin{itemize}
          \item Optimize database interactions
          \item Smarter recover and retry due to different kinds of
                failures
          \item Optimize disk usage - \textit{streaming}
          \item Leverage more diverse and bigger compute and
                storage
        \end{itemize}
      \end{column}
    \end{columns}
  }
}

\def\cwl{

  \flexblock{Common Workflow Language}{
    \begin{itemize}
      \item Support planned for many platforms - including Galaxy,
      Arvados, Galaxy, and Seven Bridges Genomics, and Taverna.
      \item Portable means of representing and invoking
      command line tools which was then the basis for
      portable workflow descriptions.
      \item A YAML description validated by an Apache Avro schema and
      that can be interpreted as an RDF graph using JSON-LD.
      \item Re-using existing formats and ontologies.
      \item Compatible with Wf4Ever descriptions.
      \item Second draft of the Common Workflow Language specification past March, final 1.0 specification scheduled for next April.
    \end{itemize}
   }
}
\def\cwlingalaxy{

  \flexblock{Common Workflow Language \& Galaxy}{
    \begin{itemize}
      \item Work in progress at https://github.com/common-workflow-language/galaxy.
      \item Beta test running tool descriptions in Galaxy and integration with Galaxy's tool development SDK Planemo.
      \item Workflow support will be added in 2016 and will require 
      the extensions presented here - collections and real workflow 
      scheduling.
    \end{itemize}
   }
}
